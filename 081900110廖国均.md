[https://github.com/Hanavii/2022software_work1/tree/mywork](https://github.com/Hanavii/2022software_work1/tree/mywork)

___
# 一、PSP表格
## 1.1、在开始实现程序之前，在附录提供的PSP表格记录下你估计将在程序的各个模块的开发上耗费的时间
## 1.2、在你实现完程序之后，在附录提供的PSP表格记录下你在程序的各个模块上实际花费的时间
|PSP2.1|Personal Software Process Stages| 预估耗时（分钟）|实际耗时（分钟）
|:-|:-|:-|:-|
|**Planning**|**计划**|**60**|**90**|
|**·Estimate**|**·估计这个任务需要多少时间**|**60**|**90**|
|**Development**|**开发**|**1470**|**1810**|
|**·Analysis**|**·需求分析（包括学习新技术）**|**240**|**360**|
|**·Design Spec**|**·生成设计文档**|**240**|**200**|
|**·Design Review**|**·设计复审**|**90**|**100**|
|**·Coding Standard**|**·代码规范（为目前的开发制定合适的规范）**|**60**|**70**|
|**·Design**|**·具体设计**|**120**|**130**|
|**·Coding**|**·具体编码**|**480**|**660**|
|**·Code Review**|**·代码复审**|**120**|**150**|
|**·Test**|**·测试（自我测试，修改代码，提交测试）**|**120**|**140**|
|**Reporting**|**报告**|**600**|**630**|
|**·Test Repor**|**·测试报告**|**240**|**220**|
|**·Size Measurement**|**·计算工作量**|**180**|**170**|
|**·Posimortem & Process Improvement Plan**|**·事后总结，并提出过程改进计划**|**180**|**240**|
||**·合计**|**2130**|**2530**|
___
# 二、任务要求的实现
## 2.1、项目设计与技术栈 
**从阅读完题目到完成作业，这一次的任务被你拆分成了几个环节？你分别通过什么渠道、使用什么方式方法完成了各个环节？列出你完成本次任务所使用的技术栈。**
1. 爬取卫健委网页（beautifulsoup4, re, asyncio, pyppeteer）
2. 对网页进行分析，研究如何获取所需要的病例数据（F12工具栏）
3. 将爬取的数据进行处理整合，得到正确的病例数据（pandas，matplotlib）
4. 将处理后的数据导入.xml文件中（openpyxl）
5. 通过文本对比分析，找出与前一日差别较大的文本（jieba）
6. 对.xml文件进行数据可视化展示（html_parser, aiohttp, Scripts, show_graphsm, ）
## 2.2、爬虫与数据处理
**说明业务逻辑，简述代码的设计过程（例如可介绍有几个类，几个函数，他们之间的关系），并对关键的函数或算法进行说明。**
1. 主函数main()：依次运行info_list.create_province_list()， info_list.ChinaTotal()， update_data.update(),  write_data.write()， show_graphs.show_data()，
2. class ChinaTotal：写入了国内阳性病例和无症状感染者的数量
3. create_province_list()：将国内省份名称导入字典，并且后续将阳性数量作为value对应省份的key
4. update_data.update()：获取每日更新的数据并进行处理
5.  write_data.write()：将数据写入.xml文件中
6. show_graphs.show_data()：通过matplotlib库将.xml文件可视化
## 2.3、数据统计接口部分的性能改进
**记录在数据统计接口的性能上所花费的时间，描述你改进的思路，并展示一张性能分析图（例如可通过VS 2019/JProfiler的性能分析工具自动生成），并展示你程序中消耗最大的函数**
![Pycharm性能分析工具分析图](https://img-blog.csdnimg.cn/a5457e134619494c82face624235dc1d.png)
![程序消耗中最大的函数](https://img-blog.csdnimg.cn/cdcb6ebe7f5c4213b79fd15508d9a97b.png)
此处time.sleep(1)消耗最大，是因为耗时最长，为了绕过网站的反爬机制，所以限制了爬取的速率，也防止了从爬取数据变成ddos攻击。
## 2.4、每日热点的实现思路
**简要介绍实现该功能的算法原理，可给出必要的步骤流程图、数学公式推导和核心代码实现，并简要谈谈所采用算法的优缺点与可能的改进方案**
1. 首先通过jieba库，对爬取到的文章文字内容进行分词，获取前一日的词库数据，随后再爬进今日的文章文字内容进行分词。
2. 之后对两天的文字内容分词后的数据进行比对，对于常见的人，的……等词我们会排除在外，然后根据有什么词汇是昨天出现了今天没有出现的我们进行判断。然后找到这个词所在的句子，将句子进行输出，即可知道有什么热点事件。例如，可能出现的社会面清零等词汇。

## 2.5、数据可视化界面的展示
**数据可视化界面的展示。在博客中介绍数据可视化界面的组件和设计的思路**
![https://img-blog.csdnimg.cn/7d326e16754a471f94128bc60d93b3d4.png
](https://img-blog.csdnimg.cn/7d326e16754a471f94128bc60d93b3d4.png)
![https://img-blog.csdnimg.cn/64ba3cdb666f4133a9fcdc6091e52644.png
](https://img-blog.csdnimg.cn/64ba3cdb666f4133a9fcdc6091e52644.png)

1. 可视化组件主要是使用了matplotlib库来进行可视化图像的绘制
2. 设计的思路是，考虑到可视化展示要方便快捷地看出每个省份的新增阳性人数，那么在图表中通过折线图来表示
新增阳性人数和新增无症状感染者是最为直观且方便的方式。
3. 可视化的思路如下：首先是读取已经从卫健委网站上爬取的.xml文件，将这个数据通过matplotlib的绘图函数进行绘制，绘制完成后进行图像展示。
___
# 三、心得体会
## 3.1、在这儿写下你完成本次作业的心得体会，当然，如果你还有想表达的东西但在上面两个板块没有体现，也可以写在这儿
1. 这次实验给的时间是两个星期，但是由于自己的时间安排太不合理，导致没有很多的时间来完成这次的软工个人编程任务。所以最终就变成了大家习以为常的赶deadline。
2. 一个爬取疫情感染人数数据，听起来事情并不多，但是实际上任务量很大。首先要对卫健委网站的html代码进行分析，随后再进行数据爬取，爬取了之后还有数据处理，最后才是数据可视化。四个子任务合起来才是这次的个人编程任务。所以任务量非常大。
3. 强烈地感觉到了自己代码能力的不足，很多常见的框架也没用过，就连基本的python代码也写得不顺手。长路漫漫，还有很多代码要写，不然可没法修炼成仙。
